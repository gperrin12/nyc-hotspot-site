<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>NYC Taxi Hotspot Analysis</title>
<link href="https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&family=DM+Sans:wght@300;400;500;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.css"/>
<script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.js"></script>
<style>
:root{--bg:#0a0c10;--surface:#12151c;--border:#1e2230;--text:#c8cdd8;--text-dim:#5a6070;--sat-hot:#ff3366;--sat-warm:#ff6b9d;--mon-hot:#00d4ff;--mon-warm:#66e5ff;--accent:#f0c040}
*{margin:0;padding:0;box-sizing:border-box}
body{background:var(--bg);color:var(--text);font-family:'DM Sans',sans-serif;height:100vh;overflow:hidden;display:flex;flex-direction:column}
header{position:relative;z-index:2;padding:20px 32px 14px;border-bottom:1px solid var(--border);background:var(--bg);flex-shrink:0}
header .label{font-family:'Space Mono',monospace;font-size:10px;letter-spacing:3px;text-transform:uppercase;color:var(--text-dim);margin-bottom:5px}
header h1{font-family:'Space Mono',monospace;font-size:22px;font-weight:700;color:#fff}
header h1 .sat{color:var(--sat-hot)} header h1 .mon{color:var(--mon-hot)} header h1 .vs{color:var(--text-dim);font-weight:400;font-size:16px}
.toolbar{position:relative;z-index:2;display:flex;align-items:center;gap:8px;padding:10px 32px;border-bottom:1px solid var(--border);background:var(--surface);flex-shrink:0}
.toolbar button{font-family:'Space Mono',monospace;font-size:11px;letter-spacing:1px;padding:7px 14px;border:1px solid var(--border);border-radius:4px;background:var(--bg);color:var(--text-dim);cursor:pointer;transition:all .2s;white-space:nowrap}
.toolbar button:hover{border-color:var(--text-dim);color:var(--text)}
.toolbar button.a-s{border-color:var(--sat-hot);color:var(--sat-hot);background:rgba(255,51,102,.08)}
.toolbar button.a-m{border-color:var(--mon-hot);color:var(--mon-hot);background:rgba(0,212,255,.08)}
.toolbar button.a-b{border-color:var(--accent);color:var(--accent);background:rgba(240,192,64,.08)}
.toolbar .sep{width:1px;height:24px;background:var(--border);margin:0 4px}
.toolbar .hint{font-size:11px;color:var(--text-dim);margin-left:auto}
.main{position:relative;z-index:1;display:grid;grid-template-columns:1fr 330px;flex:1;overflow:hidden}
.map-wrap{position:relative;overflow:hidden}
#map{width:100%;height:100%;background:#0d0f14}
.leaflet-container{background:#0d0f14!important}
.leaflet-control-zoom a{background:var(--surface)!important;color:var(--text)!important;border-color:var(--border)!important}
.leaflet-control-attribution{background:rgba(10,12,16,.85)!important;color:var(--text-dim)!important;font-size:9px!important}
.leaflet-control-attribution a{color:var(--text-dim)!important}
#overlay{position:absolute;inset:0;z-index:450;pointer-events:none}
.sb{padding:22px;overflow-y:auto;background:var(--bg);border-left:1px solid var(--border);z-index:2}
.sb h3{font-family:'Space Mono',monospace;font-size:10px;letter-spacing:2px;text-transform:uppercase;color:var(--text-dim);margin-bottom:12px}
.sc{background:var(--surface);border:1px solid var(--border);border-radius:6px;padding:12px;margin-bottom:8px}
.sc .t{font-size:11px;color:var(--text-dim);margin-bottom:4px}
.sc .v{font-family:'Space Mono',monospace;font-size:18px;font-weight:700}
.li{display:flex;align-items:center;gap:9px;margin-bottom:7px;font-size:12px}
.ld{width:10px;height:10px;border-radius:50%;flex-shrink:0}
.zr{display:flex;align-items:center;padding:5px 0;border-bottom:1px solid var(--border);font-size:11px}
.zr .n{color:var(--text);min-width:80px}
.zr .ct{font-family:'Space Mono',monospace;font-size:10px;min-width:48px;text-align:right}
.zr .bc{flex:1;margin:0 8px;height:3px;background:var(--border);border-radius:2px;overflow:hidden}
.zr .b{height:100%;border-radius:2px;transition:width .6s}
.meth{margin-top:16px;padding:12px;background:var(--surface);border:1px solid var(--border);border-radius:6px;font-size:10px;color:var(--text-dim);line-height:1.7}
.meth strong{color:var(--text)}
</style>
</head>
<body>
<header>
<div class="label">NYC TLC Pre-2016 Data · Normalized Geospatial Hotspot Analysis</div>
<h1><span class="sat">Saturday 2 AM</span><span class="vs"> vs </span><span class="mon">Monday 8 AM</span></h1>
</header>
<div class="toolbar">
<button id="bb" class="a-b" onclick="sv('both')">OVERLAY</button>
<button id="bs" onclick="sv('sat')">SAT 2AM</button>
<button id="bm" onclick="sv('mon')">MON 8AM</button>
<button id="bd" onclick="sv('diff')">DIFFERENCE</button>
<div class="sep"></div>
<button id="bh" onclick="th()">HEATMAP</button>
<span class="hint">Normalized pickup density · 2015</span>
</div>
<div class="main">
<div class="map-wrap"><div id="map"></div><canvas id="overlay"></canvas></div>
<div class="sb" id="sb"></div>
</div>
<script>
const S=[{lat:40.719,lon:-73.989,c:2146},{lat:40.742,lon:-74.004,c:1861},{lat:40.726,lon:-73.992,c:1645},{lat:40.74,lon:-74.006,c:1643},{lat:40.72,lon:-73.988,c:1465},{lat:40.727,lon:-73.992,c:1461},{lat:40.729,lon:-74.0,c:1405},{lat:40.722,lon:-73.958,c:1290},{lat:40.719,lon:-73.99,c:1284},{lat:40.734,lon:-74.003,c:1148},{lat:40.75,lon:-74.003,c:1092},{lat:40.732,lon:-73.988,c:1063},{lat:40.744,lon:-74.007,c:1039},{lat:40.722,lon:-73.992,c:923},{lat:40.729,lon:-73.987,c:916},{lat:40.741,lon:-73.993,c:910},{lat:40.721,lon:-73.994,c:902},{lat:40.723,lon:-73.988,c:892},{lat:40.73,lon:-73.981,c:882},{lat:40.722,lon:-73.986,c:880},{lat:40.74,lon:-74.002,c:855},{lat:40.746,lon:-73.978,c:825},{lat:40.741,lon:-74.008,c:822},{lat:40.731,lon:-73.989,c:817},{lat:40.721,lon:-73.997,c:815},{lat:40.72,lon:-73.987,c:810},{lat:40.721,lon:-73.988,c:803},{lat:40.721,lon:-73.989,c:801},{lat:40.722,lon:-73.989,c:783},{lat:40.726,lon:-73.984,c:759},{lat:40.731,lon:-74.001,c:756},{lat:40.741,lon:-74.005,c:750},{lat:40.721,lon:-73.998,c:748},{lat:40.74,lon:-74.005,c:747},{lat:40.722,lon:-73.987,c:745},{lat:40.733,lon:-73.988,c:728},{lat:40.733,lon:-74.003,c:712},{lat:40.742,lon:-74.005,c:708},{lat:40.747,lon:-73.891,c:687},{lat:40.738,lon:-74.009,c:686},{lat:40.734,lon:-74.002,c:668},{lat:40.728,lon:-73.999,c:667},{lat:40.733,lon:-73.987,c:659},{lat:40.73,lon:-73.99,c:645},{lat:40.742,lon:-74.006,c:641},{lat:40.729,lon:-74.001,c:634},{lat:40.747,lon:-73.986,c:631},{lat:40.748,lon:-73.987,c:627},{lat:40.725,lon:-73.984,c:616},{lat:40.761,lon:-73.987,c:608},{lat:40.726,lon:-73.99,c:605},{lat:40.739,lon:-74.002,c:604},{lat:40.752,lon:-74.004,c:596},{lat:40.732,lon:-73.985,c:588},{lat:40.719,lon:-73.988,c:582},{lat:40.765,lon:-73.988,c:579},{lat:40.727,lon:-73.983,c:577},{lat:40.739,lon:-73.983,c:576},{lat:40.73,lon:-74.0,c:571},{lat:40.727,lon:-73.98,c:571},{lat:40.719,lon:-74.005,c:556},{lat:40.718,lon:-73.958,c:549},{lat:40.764,lon:-73.987,c:541},{lat:40.744,lon:-73.984,c:534},{lat:40.721,lon:-73.987,c:522},{lat:40.723,lon:-73.989,c:521},{lat:40.728,lon:-74.0,c:515},{lat:40.736,lon:-74.001,c:492},{lat:40.756,lon:-73.968,c:490},{lat:40.731,lon:-73.983,c:486},{lat:40.73,lon:-74.001,c:482},{lat:40.725,lon:-73.992,c:481},{lat:40.764,lon:-73.998,c:472},{lat:40.72,lon:-73.993,c:470},{lat:40.763,lon:-73.972,c:467},{lat:40.719,lon:-73.993,c:464},{lat:40.808,lon:-73.945,c:464},{lat:40.757,lon:-73.967,c:461},{lat:40.761,lon:-73.99,c:448},{lat:40.732,lon:-74.001,c:435}];
const M=[{lat:40.75,lon:-73.991,c:1735},{lat:40.774,lon:-73.871,c:1482},{lat:40.751,lon:-73.994,c:1293},{lat:40.75,lon:-73.992,c:1254},{lat:40.645,lon:-73.782,c:1189},{lat:40.752,lon:-73.978,c:1172},{lat:40.757,lon:-73.99,c:1162},{lat:40.756,lon:-73.991,c:1085},{lat:40.769,lon:-73.863,c:944},{lat:40.751,lon:-73.991,c:916},{lat:40.645,lon:-73.777,c:885},{lat:40.767,lon:-73.954,c:863},{lat:40.749,lon:-73.992,c:819},{lat:40.756,lon:-73.99,c:773},{lat:40.711,lon:-74.016,c:771},{lat:40.752,lon:-73.975,c:768},{lat:40.805,lon:-73.939,c:743},{lat:40.753,lon:-73.978,c:742},{lat:40.77,lon:-73.864,c:675},{lat:40.768,lon:-73.962,c:654},{lat:40.756,lon:-73.977,c:598},{lat:40.756,lon:-73.975,c:583},{lat:40.77,lon:-73.863,c:580},{lat:40.769,lon:-73.952,c:576},{lat:40.744,lon:-73.973,c:562},{lat:40.715,lon:-74.016,c:560},{lat:40.774,lon:-73.873,c:549},{lat:40.75,lon:-73.995,c:543},{lat:40.746,lon:-73.98,c:535},{lat:40.765,lon:-73.964,c:530},{lat:40.766,lon:-73.963,c:519},{lat:40.769,lon:-73.961,c:513},{lat:40.716,lon:-74.015,c:503},{lat:40.757,lon:-73.998,c:502},{lat:40.771,lon:-73.866,c:480},{lat:40.757,lon:-73.964,c:476},{lat:40.767,lon:-73.963,c:451},{lat:40.742,lon:-73.975,c:449},{lat:40.746,lon:-73.972,c:446},{lat:40.764,lon:-73.965,c:445},{lat:40.751,lon:-73.99,c:442},{lat:40.77,lon:-73.961,c:440},{lat:40.752,lon:-73.977,c:439},{lat:40.762,lon:-73.966,c:436},{lat:40.764,lon:-73.959,c:431},{lat:40.747,lon:-73.979,c:424},{lat:40.757,lon:-73.967,c:417},{lat:40.768,lon:-73.956,c:411},{lat:40.762,lon:-73.96,c:409},{lat:40.765,lon:-73.966,c:407},{lat:40.647,lon:-73.79,c:405},{lat:40.744,lon:-73.992,c:397},{lat:40.766,lon:-73.964,c:395},{lat:40.747,lon:-73.981,c:394},{lat:40.804,lon:-73.967,c:392},{lat:40.767,lon:-73.957,c:383},{lat:40.745,lon:-73.995,c:382},{lat:40.773,lon:-73.958,c:381},{lat:40.768,lon:-73.982,c:380},{lat:40.766,lon:-73.954,c:377},{lat:40.732,lon:-74.008,c:376},{lat:40.767,lon:-73.983,c:375},{lat:40.753,lon:-73.979,c:375},{lat:40.772,lon:-73.959,c:373},{lat:40.739,lon:-73.987,c:373},{lat:40.758,lon:-73.966,c:373},{lat:40.756,lon:-73.998,c:372},{lat:40.752,lon:-73.976,c:371},{lat:40.748,lon:-74.004,c:371},{lat:40.733,lon:-74.006,c:369},{lat:40.749,lon:-73.973,c:369},{lat:40.743,lon:-73.993,c:368},{lat:40.749,lon:-73.98,c:366},{lat:40.737,lon:-73.993,c:365},{lat:40.789,lon:-73.955,c:363},{lat:40.759,lon:-73.996,c:360},{lat:40.763,lon:-73.966,c:353},{lat:40.763,lon:-73.982,c:350},{lat:40.738,lon:-73.988,c:350},{lat:40.732,lon:-74.007,c:349}];
const sM=Math.max(...S.map(d=>d.c)),mM=Math.max(...M.map(d=>d.c));
S.forEach(d=>d.n=d.c/sM);M.forEach(d=>d.n=d.c/mM);
function gN(lat,lon){const z=[{n:"Lower East Side",a:40.715,b:40.725,c:-73.995,d:-73.982},{n:"East Village",a:40.722,b:40.733,c:-73.995,d:-73.978},{n:"West Village",a:40.728,b:40.738,c:-74.008,d:-73.997},{n:"Chelsea",a:40.738,b:40.750,c:-74.010,d:-73.993},{n:"SoHo / NoLiTa",a:40.717,b:40.726,c:-74.003,d:-73.990},{n:"Greenwich Village",a:40.726,b:40.738,c:-74.005,d:-73.993},{n:"Williamsburg",a:40.710,b:40.725,c:-73.965,d:-73.950},{n:"Times Square",a:40.754,b:40.762,c:-73.992,d:-73.982},{n:"Midtown East",a:40.749,b:40.760,c:-73.980,d:-73.965},{n:"Penn Station",a:40.748,b:40.755,c:-74.000,d:-73.988},{n:"Upper East Side",a:40.762,b:40.775,c:-73.970,d:-73.950},{n:"Harlem",a:40.800,b:40.815,c:-73.955,d:-73.935},{n:"FiDi / WTC",a:40.708,b:40.718,c:-74.020,d:-74.008},{n:"LaGuardia",a:40.765,b:40.780,c:-73.880,d:-73.858},{n:"JFK Airport",a:40.640,b:40.655,c:-73.795,d:-73.770},{n:"Gramercy / Flatiron",a:40.735,b:40.748,c:-73.993,d:-73.978},{n:"Hell's Kitchen",a:40.755,b:40.770,c:-74.002,d:-73.988}];for(const t of z)if(lat>=t.a&&lat<=t.b&&lon>=t.c&&lon<=t.d)return t.n;return null}
const map=L.map('map',{center:[40.738,-73.970],zoom:12,zoomControl:true});
L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png',{attribution:'&copy; CARTO &copy; OSM',subdomains:'abcd',maxZoom:19}).addTo(map);
const cv=document.getElementById('overlay'),cx=cv.getContext('2d');let vw='both',hm=false;
function rc(){const r=cv.parentElement.getBoundingClientRect(),d=devicePixelRatio||1;cv.width=r.width*d;cv.height=r.height*d;cv.style.width=r.width+'px';cv.style.height=r.height+'px';cx.setTransform(d,0,0,d,0,0)}
function lp(lat,lon){const p=map.latLngToContainerPoint([lat,lon]);return[p.x,p.y]}
function hr(h){return`${parseInt(h.slice(1,3),16)},${parseInt(h.slice(3,5),16)},${parseInt(h.slice(5,7),16)}`}
function dp(data,hc,wc){const z=map.getZoom(),br=Math.max(2.5,Math.min(z-7,8)),cw=cv.width/(devicePixelRatio||1),ch=cv.height/(devicePixelRatio||1);
[...data].sort((a,b)=>a.n-b.n).forEach(d=>{const[x,y]=lp(d.lat,d.lon);if(x<-60||y<-60||x>cw+60||y>ch+60)return;const r=br+d.n*(br*2),a=.15+d.n*.78,c=hr(hc);
if(hm){const g=cx.createRadialGradient(x,y,0,x,y,r*6);g.addColorStop(0,`rgba(${c},${a*.55})`);g.addColorStop(.35,`rgba(${c},${a*.2})`);g.addColorStop(1,`rgba(${c},0)`);cx.fillStyle=g;cx.beginPath();cx.arc(x,y,r*6,0,Math.PI*2);cx.fill()}
else{const g=cx.createRadialGradient(x,y,0,x,y,r*2.8);g.addColorStop(0,`rgba(${c},${a*.35})`);g.addColorStop(1,`rgba(${c},0)`);cx.fillStyle=g;cx.beginPath();cx.arc(x,y,r*2.8,0,Math.PI*2);cx.fill()}
cx.globalAlpha=a;cx.fillStyle=d.n>.55?hc:wc;cx.beginPath();cx.arc(x,y,r,0,Math.PI*2);cx.fill();
if(d.n>.7){cx.globalAlpha=d.n*.55;cx.fillStyle='#fff';cx.beginPath();cx.arc(x,y,r*.32,0,Math.PI*2);cx.fill()}cx.globalAlpha=1})}
function dd(){const g={};S.forEach(d=>{g[d.lat+'_'+d.lon]={s:d.n,m:0,lat:d.lat,lon:d.lon}});M.forEach(d=>{const k=d.lat+'_'+d.lon;if(!g[k])g[k]={s:0,m:0,lat:d.lat,lon:d.lon};g[k].m=d.n});
const z=map.getZoom(),br=Math.max(2.5,Math.min(z-7,8)),cw=cv.width/(devicePixelRatio||1),ch=cv.height/(devicePixelRatio||1);
Object.values(g).sort((a,b)=>Math.abs(a.s-a.m)-Math.abs(b.s-b.m)).forEach(d=>{const[x,y]=lp(d.lat,d.lon);if(x<-60||y<-60||x>cw+60||y>ch+60)return;const df=d.s-d.m,mg=Math.abs(df);if(mg<.04)return;
const r=br+mg*(br*2),a=.2+mg*.7,cl=df>0?'#ff3366':'#00d4ff',c=hr(cl);
const gl=cx.createRadialGradient(x,y,0,x,y,r*3);gl.addColorStop(0,`rgba(${c},${a*.35})`);gl.addColorStop(1,`rgba(${c},0)`);cx.fillStyle=gl;cx.beginPath();cx.arc(x,y,r*3,0,Math.PI*2);cx.fill();
cx.globalAlpha=a;cx.fillStyle=cl;cx.beginPath();cx.arc(x,y,r,0,Math.PI*2);cx.fill();
if(mg>.6){cx.globalAlpha=mg*.45;cx.fillStyle='#fff';cx.beginPath();cx.arc(x,y,r*.3,0,Math.PI*2);cx.fill()}cx.globalAlpha=1})}
function render(){rc();cx.clearRect(0,0,cv.width,cv.height);if(vw==='diff')dd();else{if(vw==='both'||vw==='sat')dp(S,'#ff3366','#ff6b9d');if(vw==='both'||vw==='mon')dp(M,'#00d4ff','#66e5ff')}}
map.on('move zoom moveend zoomend resize',render);window.addEventListener('resize',render);setTimeout(render,500);
function sv(v){vw=v;document.querySelectorAll('.toolbar button:not(#bh)').forEach(b=>b.className='');const btn=document.getElementById(v==='sat'?'bs':v==='mon'?'bm':v==='diff'?'bd':'bb');btn.className=v==='sat'?'a-s':v==='mon'?'a-m':'a-b';render();us()}
function th(){hm=!hm;document.getElementById('bh').className=hm?'a-b':'';render()}
function gz(data){const z={};data.forEach(d=>{const n=gN(d.lat,d.lon);if(n)z[n]=(z[n]||0)+d.c});return Object.entries(z).sort((a,b)=>b[1]-a[1]).slice(0,8)}
function us(){const sb=document.getElementById('sb');
const sT=S.reduce((s,d)=>s+d.c,0),mT=M.reduce((s,d)=>s+d.c,0);
const sC={lat:S.reduce((s,d)=>s+d.lat*d.c,0)/sT,lon:S.reduce((s,d)=>s+d.lon*d.c,0)/sT};
const mC={lat:M.reduce((s,d)=>s+d.lat*d.c,0)/mT,lon:M.reduce((s,d)=>s+d.lon*d.c,0)/mT};
const sZ=gz(S),mZ=gz(M),sZM=sZ[0]?.[1]||1,mZM=mZ[0]?.[1]||1;
const sS=Math.sqrt(S.reduce((s,d)=>s+d.c*((d.lat-sC.lat)**2+(d.lon-sC.lon)**2),0)/sT);
const mS=Math.sqrt(M.reduce((s,d)=>s+d.c*((d.lat-mC.lat)**2+(d.lon-mC.lon)**2),0)/mT);
const cd=Math.sqrt((sC.lat-mC.lat)**2+(sC.lon-mC.lon)**2)*111;
let h=`<h3>Summary</h3>`;
h+=`<div class="sc"><div class="t">Sat 2AM Pickups (top 80 cells)</div><div class="v" style="color:var(--sat-hot)">${sT.toLocaleString()}</div></div>`;
h+=`<div class="sc"><div class="t">Mon 8AM Pickups (top 80 cells)</div><div class="v" style="color:var(--mon-hot)">${mT.toLocaleString()}</div></div>`;
h+=`<div class="sc"><div class="t">Center of Gravity Shift</div><div class="v" style="font-size:18px;color:var(--accent)">${cd.toFixed(1)} km north</div><div style="font-size:10px;color:var(--text-dim);margin-top:3px"><span style="color:var(--sat-warm)">Sat:</span> ${sC.lat.toFixed(3)}°N — ≈ LES / East Village<br><span style="color:var(--mon-warm)">Mon:</span> ${mC.lat.toFixed(3)}°N — ≈ Midtown / Penn Sta</div></div>`;
h+=`<div class="sc"><div class="t">Spatial Dispersion (weighted σ)</div><div style="font-family:'Space Mono',monospace;font-size:13px;margin-top:3px"><span style="color:var(--sat-hot)">Sat: ${(sS*111).toFixed(2)} km</span><br><span style="color:var(--mon-hot)">Mon: ${(mS*111).toFixed(2)} km</span></div><div style="font-size:10px;color:var(--text-dim);margin-top:3px">${mS>sS?'Monday demand more dispersed (airports + transit hubs)':'Saturday nightlife more geographically spread'}</div></div>`;
h+=`<div style="margin:16px 0"><h3>Legend</h3><div class="li"><div class="ld" style="background:var(--sat-hot)"></div><span>Saturday 2 AM pickups</span></div><div class="li"><div class="ld" style="background:var(--mon-hot)"></div><span>Monday 8 AM pickups</span></div><div class="li"><div class="ld" style="background:var(--text-dim);width:6px;height:6px"></div><span style="color:var(--text-dim);font-size:10px">Size + opacity = normalized intensity</span></div></div>`;
h+=`<h3>Top Areas — Sat 2AM</h3><div>`;
sZ.forEach(([n,c])=>{h+=`<div class="zr"><span class="n">${n}</span><div class="bc"><div class="b" style="width:${c/sZM*100}%;background:var(--sat-hot)"></div></div><span class="ct" style="color:var(--sat-warm)">${c.toLocaleString()}</span></div>`});
h+=`</div><h3 style="margin-top:16px">Top Areas — Mon 8AM</h3><div>`;
mZ.forEach(([n,c])=>{h+=`<div class="zr"><span class="n">${n}</span><div class="bc"><div class="b" style="width:${c/mZM*100}%;background:var(--mon-hot)"></div></div><span class="ct" style="color:var(--mon-warm)">${c.toLocaleString()}</span></div>`});
h+=`</div>`;
h+=`<div class="meth" style="margin-top:16px"><strong style="color:var(--sat-hot)">Saturday 2AM</strong> — Nightlife corridors: LES, East Village, West Village, Chelsea/Meatpacking. Concentrated below 14th St.<br><br><strong style="color:var(--mon-hot)">Monday 8AM</strong> — Shifts north to Midtown transit (Penn Sta, Grand Central, Times Sq), UES, airports (LGA, JFK), and FiDi.<br><br><strong>DIFFERENCE mode</strong>: <span style="color:var(--sat-hot)">Pink</span> = Sat-dominant. <span style="color:var(--mon-hot)">Blue</span> = Mon-dominant.</div>`;
h+=`<div class="meth"><strong>Methodology</strong><br>Source: NYC TLC <code>par</code> table, 2015. Grid: 0.001° (~110m). Top 80 cells per window. Each dataset min-max normalized to [0,1] independently. Dot size and opacity encode normalized intensity for fair spatial comparison.</div>`;
sb.innerHTML=h}
us();
</script>
</body>
</html>
